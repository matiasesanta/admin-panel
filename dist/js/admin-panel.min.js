/*! admin-panel 2018-02-15 */

function navigationController(e,t,n,a){function i(t){e.currentRoute=t;var n=0;for(var a in e.items){if("#"===e.items[a].link)for(var i in e.items[a].items){var o=e.items[a].items[i];if(o.slice(o.indexOf("/"))===t){e.baseIndex=n;break}}else if(e.items[a].link.slice(e.items[a].link.indexOf("/"))===t){e.baseIndex=n;break}n++}}e.items=n.navigationItems,e.elem=$("navigation"),e.currentRoute=null,e.baseIndex=null,e.checkRoute=function(t){return{"is-active":t.slice(t.indexOf("/"))===e.currentRoute}},this.$onInit=function(){t(function(){e.elem=$("navigation"),e.accordion=new Foundation.AccordionMenu(e.elem),e.elem.find("> .menu").addClass("visible")}),i(a.path())},this.$onDestroy=function(){e.accordion&&e.accordion.$element.foundation("_destroy")},e.$on("$routeChangeSuccess",function(e,t){i(a.path())})}function topBarController(e,t,n){e.clickBtn=function(){t.logout(),n.path("/login")},this.$postLink=function(){$("top-bar").foundation()}}angular.module("adminPanel",["ngAnimate","adminPanel.authentication","adminPanel.crud","adminPanel.topBar","adminPanel.navigation"]).directive("adminPanel",[function(){return{restrict:"E",templateUrl:"admin-panel.template.html"}}]),angular.module("adminPanel.crud",["adminPanel","ngResource"]),angular.module("adminPanel.crud").directive("apDelete",[function(){return{restrict:"A",require:"^^apDeleteContainer",link:function(e,t,n,a){var i=null;function o(){null===i||angular.isUndefined(i)||a.deleteElem(i)}e.$watch(n.apDelete,function(e){i=e}),t.on("click",o),e.$on("$destroy",function(){t.off("click",o)})}}}]),angular.module("adminPanel.crud").directive("apDeleteContainer",["CrudConfig",function(e){return{restrict:"A",link:function(t,n,a){t.$watch(a.apDeleteContainer,function(n){t.text=angular.isUndefined(n.text)?e.messages.deleteMsg:n.text,t.title=angular.isUndefined(n.title)?e.messages.deleteTitle:n.title}),t.fn=function(e){return function(){t.$emit("ap-delete-elem:list-ctrl",e)}}},controller:["$rootScope","$scope",function(e,t){this.deleteElem=function(n){e.$broadcast("ap-confirm-modal:show",{title:t.title,text:t.text,fn:t.fn(n)})}}]}}]),angular.module("adminPanel.crud").directive("apList",[function(){return{restrict:"AE",transclude:!0,scope:{list:"="},link:function(e){e.noResultText="No hay resultados"},templateUrl:"components/crud/directives/list/list.template.html"}}]),angular.module("adminPanel.crud").directive("apListContainer",[function(){return{restrict:"AE",scope:{title:"@",newRoute:"@?"},transclude:{list:"list",form:"?searchForm"},templateUrl:"components/crud/directives/list/listContainer.template.html"}}]),angular.module("adminPanel.crud").factory("BasicFormController",["CrudFactory","CrudConfig","$q",function(e,t,n){return function(a,i,o){var r=this;r.$$crudFactory=new e(a,i),r.$$form=angular.isUndefined(o)?"form":o,r.get=function(e,o){var l=n.defer(),s=!0;(angular.isUndefined(e[i.name])||null===e[i.name]||e[i.name]===t.newPath)&&(l.reject(!1),s=!1);var u=e,c=o||"get",d=null;return s&&(d=r.$$crudFactory.doRequest(c,u).then(function(e){return a[i.name]=e.data,e},function(e){return n.reject(e)})),l.resolve(d),l.promise},r.submit=function(e){var t=a[i.name];null!==i.parent&&(t[i.parent]=a[i.parent]);var o=e||"save";if(a[r.$$form]&&a[r.$$form].$valid)return r.$$crudFactory.doRequest(o,t).then(function(e){return e.data&&(a[i.name]=e.data),e},function(e){n.reject(e)})},r.init=function(e,t){var n={};return n[i.name]=e,r.get(n,t)},r.destroy=function(){this.$$crudFactory.cancelRequest()}}}]),angular.module("adminPanel.crud").factory("BasicFormController1",["CrudConfig",function(e){return function(e,t,n){this.request=null;var a=t.name;e[a]={},this.get=function(n,i){var o=t.property;if(o&&!angular.isUndefined(this[a][o])&&null!==this[a][o])return e[a]=this[a],e[a][o]?e[o]=e[a][o]:e[a][o]=e[o],void(callbackInit&&callbackInit());if(this[a]&&"nuevo"!==this[a]){var r={};r[a]=this[a],form.init(r,function(t){e[a]=t.data,o&&(e[a][o]?e[o]=e[a][o]:e[a][o]=t.data[o]),callbackInit&&callbackInit()})}},this.submit=function(t,n){e.form?e.form.$valid&&form.submit(e[a],function(t){t.data&&(e[a]=t.data),callbackSubmit&&callbackSubmit()}):form.submit(e[a],function(t){t.data&&(e[a]=t.data),callbackSubmit&&callbackSubmit()})},this.destroy=function(){this.request&&this.request.$cancelRequest()}}}]),angular.module("adminPanel.crud").factory("BasicListController",["CrudFactory","$timeout","$q",function(e,t,n){return function(a,i){var o=this;o.listParams=null,a.list=[],o.$$crudFactory=new e(a,i),o.parentData=null,o.init=function(){return o.list()},o.list=function(e,r){if(null!==i.parent){if(!e[i.parent])return void console.error("BasicListController: El recurso tiene un padre, el cual no fue entregado");o.parentData=e[i.parent]}return o.listParams=e||{},t(function(){var e=r||"get";return o.$$crudFactory.doRequest(e,o.listParams).then(function(e){return a.list=e.data,t(function(){a.$broadcast("pagination:paginate",{totalPageCount:e.totalPageCount,currentPageNumber:e.currentPageNumber})}),e},function(e){return n.reject(e)})})},o.delete=function(e,t){var a=t||"delete",r={};return r[i.name]=e.id,null!==i.parent&&(r[i.parent]=o.parentData),o.$$crudFactory.doRequest(a,r).then(function(){return null===i.parent||o.listParams[i.parent]||(o.listParams[i.parent]=o.parentData),o.list(o.listParams)},function(e){return n.reject(e)})},o.destroy=function(){o.request&&o.$$crudFactory.cancelRequest()},a.deleteConfig={resource:i},a.$on("pagination:changepage",function(e,t){e.stopPropagation(),o.listParams.page=t,o.list(o.listParams)}),a.$on("ap-delete-elem:list-ctrl",function(e,t){e.stopPropagation(),o.delete(t)})}}]),angular.module("adminPanel.crud").factory("BasicReadController",["CrudFactory","CrudConfig","$q",function(e,t,n){return function(a,i){var o=this;o.$$crudFactory=new e(a,i),o.get=function(e,r){var l=n.defer(),s=!0;(angular.isUndefined(e[i.name])||null===e[i.name]||e[i.name]===t.newPath)&&(l.reject(!1),s=!1);var u=e,c=r||"get",d=null;return s&&(d=o.$$crudFactory.doRequest(c,u).then(function(e){return a[i.name]=e.data,e},function(e){return n.reject(e)})),l.resolve(d),l.promise},o.init=function(e){var t={};return t[i.name]=e,o.get(t)},o.destroy=function(){o.$$crudFactory.cancelRequest()}}}]),angular.module("adminPanel.crud").factory("CrudFactory",["CrudConfig","$q",function(e,t){return function(n,a){this.request=null,this.doRequest=function(i,o,r,l){return n.$emit("apLoad:start"),this.cancelRequest(),this.request=a.$resource[i](o),this.request.$promise.then(function(e){console.log("responseSuccess",e);var t=null;return"string"==typeof r&&(t={message:t,type:"success"}),n.$emit("apLoad:finish"),e},function(a){return"string"==typeof l||e.messages.loadError,n.$emit("apLoad:finish"),t.reject(a)})},this.cancelRequest=function(){return null===this.request||this.request.$promise.$resolved||this.request.$cancelRequest(),this}}}]),angular.module("adminPanel.crud").factory("CrudResource",["CrudConfig","$http","$resource","NormalizeService","$injector",function(e,t,n,a,i){return function(o,r,l,s,u){if("string"!=typeof o)throw console.error("CrudResourceFactory: el parametro name debe ser string"),"CrudResourceFactory: el parametro name debe ser string";if("string"!=typeof r)throw console.error("CrudResourceFactory: el parametro url debe ser string"),"CrudResourceFactory: el parametro url debe ser string";if(!angular.isUndefined(l)&&null!==l&&"object"!=typeof l)throw console.error("CrudResourceFactory: el parametro transform debe ser object"),"CrudResourceFactory: el parametro transform debe ser object";var c={};c.query=l&&l.query?function(e){return{data:l.query(e.data)}}:function(e){return e},c.request=l&&l.request?l.request:function(e){return e},c.response=l&&l.response?function(e){return{data:l.response(e.data)}}:function(e){return e};var d={};d[o]="@id";var m=null;s&&(d[(m=i.get(s)).name]="@"+m.name);var g=m?m.url+r:r,p={};for(var f in u){var h=u[f];h.url&&(h.url=e.basePath+h.url),h.cancellable=!0,h.transformResponse&&h.transformResponse.unshift(t.defaults.transformResponse[0]),p[f]=h}return p.query={method:"GET",transformResponse:[t.defaults.transformResponse[0],function(e){for(var t=[],n=0;n<e.length;n++)t.push(c.response(e[n]));return t}],isArray:!1,cancellable:!0},p.get={method:"GET",transformResponse:[t.defaults.transformResponse[0],c.response],cancellable:!0},p.save={method:"POST",transformRequest:[function(e){var t={};return t[o]=a.normalize(c.request(e)),delete t[o].id,m&&delete t[o][m.name],t},t.defaults.transformRequest[0]],cancellable:!0},{name:o,url:g,parent:m?m.name:null,$resource:n(e.basePath+g,d,p,{cancellable:!0})}}}]),angular.module("adminPanel.crud").provider("CrudConfig",function(){var e="",t={saveError:"Hubo un error al guardar los datos en el servidor. Recarga la página e inténtalo de nuevo",saveSusccess:"Datos guardados exitosamente",loadError:"Hubo un error al obtener los datos del servidor. Pruebe con recargar la página",deleteMsg:"¿Está seguro de eliminar el objeto seleccionado?",deleteTitle:"Eliminar Objeto"},n="nuevo";this.setBasePath=function(t){return e=t,this},this.setMessages=function(e){return t.saveError=e.saveError?e.saveError:t.saveError,t.saveSusccess=e.saveSusccess?e.saveSusccess:t.saveSusccess,t.loadError=e.loadError?e.loadError:t.loadError,t.deleteMsg=e.deleteMsg?e.deleteMsg:t.deleteMsg,t.deleteTitle=e.deleteTitle?e.deleteTitle:t.deleteTitle,this},this.setNewPath=function(e){n=e},this.$get=function(){return{basePath:e,messages:t,newPath:n}}}),angular.module("adminPanel.crud").service("CrudService",["$timeout","CrudConfig",function(e,t){var n=function(e,n,a,i){var o=this;o.init=function(i,r,l){e.$emit("apLoad:start",a);var s=n.get(i);s.$promise.then(function(t){e.$emit("apLoad:finish",a),r&&r(t)},function(n){console.log("responseError",n),e.$emit("apLoad:finish",a,{message:t.messages.loadError,type:"error"}),l&&l(n)}),o.initRequest=s},o.submit=function(r,l,s){e.$emit("apLoad:start",a),console.log("object",r);var u=n.save(r);u.$promise.then(function(o){null===i?(e.$emit("apLoad:finish",a,{message:t.messages.saveSusccess,type:"success"}),l&&l(o)):n[i.prop](o.data).$promise.then(function(n){e.$emit("apLoad:finish",a,{message:t.messages.saveSusccess,type:"success"}),l&&l(n)},function(n){throw e.$emit("apLoad:finish",a,{message:t.messages.saveError,type:"error"}),s&&s(n),"Form File Error: "+n})},function(n){throw e.$emit("apLoad:finish",a,{message:t.messages.saveError,type:"error"}),s&&s(n),"Form Error: "+n}),o.submitRequest=u},o.destroy=function(){o.initRequest&&o.initRequest.$cancelRequest(),o.submitRequest&&o.submitRequest.$cancelRequest()}},a=function(n,a,i){var o=null;this.get=function(r,l,s,u){e(function(){n.$broadcast("apLoad:start",i);var e=u||"get";o&&!o.$promise.$resolved&&o.$cancelRequest(),(o=a[e](r)).$promise.then(function(e){n.$broadcast("apLoad:finish",i),l&&l(e)},function(e){-1!==e.status&&(n.$broadcast("apLoad:finish",i,{message:t.messages.loadError,type:"error"}),s&&s(e))}),n.request=o})}};return{form:n,list:a,basicFormController:function(e,t,a,i,o,r){var l=t.name,s=new n(a,t.$resource,r,t.file);a[l]={},a.submit=function(){a.form?a.form.$valid&&s.submit(a[l],function(e){e.data&&(a[l]=e.data),o&&o()}):s.submit(a[l],function(e){e.data&&(a[l]=e.data),o&&o()})},e.$onInit=function(){var e=t.property;if(e&&!angular.isUndefined(this[l][e])&&null!==this[l][e])return a[l]=this[l],a[l][e]?a[e]=a[l][e]:a[l][e]=a[e],void(i&&i());if(this[l]&&"nuevo"!==this[l]){var n={};n[l]=this[l],s.init(n,function(t){a[l]=t.data,e&&(a[l][e]?a[e]=a[l][e]:a[l][e]=t.data[e]),i&&i()})}},e.$onDestroy=function(){s.destroy()}},basicListController:function(e,t,n,i){n.list=[];var o=new a(n,t.$resource,i);e.$onInit=function(){e.list()},e.list=function(e,t,a){var i=e||{};o.get(i,function(e){n.list=e.data,n.$broadcast("pagination:paginate",{totalPageCount:e.totalPageCount,currentPageNumber:e.currentPageNumber}),a&&a()},function(){},t)},e.$onDestroy=function(){n.request&&n.request.$cancelRequest()},n.$on("pagination:changepage",function(t,n){t.stopPropagation(),e.list({page:n})})}}}]),angular.module("adminPanel.crud").service("NormalizeService",[function(){this.normalize=function(e){var t=angular.copy(e);for(var n in t)if("$"!==n.charAt(0)){var a=n;"object"==typeof t[n]&&null!==t[n]?void 0!==t[n].id?t[a]=t[n].id:t[a]=this.normalize(t[n]):t[a]=t[n],n!=a&&delete t[n]}else delete t[n];return t}}]),angular.module("adminPanel.navigation",["adminPanel"]).component("navigation",{templateUrl:"components/navigation/navigation.template.html",controller:["$scope","$timeout","AdminPanelConfig","$location",navigationController]}),angular.module("adminPanel.topBar",["adminPanel.authentication"]).component("topBar",{templateUrl:"components/top-bar/top-bar.template.html",controller:["$scope","AuthenticationService","$location",topBarController]}),angular.module("adminPanel").directive("apAccordion",["$timeout",function(e){return{require:"ngModel",restrict:"AE",transclude:!0,scope:{allowAllClosed:"=",multiExpand:"=",addButtonText:"@?",name:"@?"},link:function(t,n,a,i){n.addClass("ap-accordion"),t.accordion=new Foundation.Accordion(n.find(".accordion"),{"data-multi-expand":t.multiExpand,"data-allow-all-closed":t.allowAllClosed}),t.addElement=function(){var e={},n=t.name?t.name:"default";t.$emit("ap.accordion.add",e,n),angular.isUndefined(i.$modelValue)||i.$modelValue.push(e)},t.removeElement=function(e){t.$emit("ap.accordion.remove",e);var n=i.$modelValue,a=n.indexOf(e);a>-1&&n.splice(a,1)},e(function(){angular.isUndefined(i.$modelValue)&&t.$apply(function(){i.$setViewValue([])})})},controller:["$scope",function(e){this.toggleTab=function(t){e.accordion.$element.foundation("toggle",t)},this.removeElement=function(t){e.removeElement(t)},this.reInitComponent=function(){e.accordion.$element.foundation("up",e.accordion.$tabs.find(".accordion-content")),Foundation.reInit(e.accordion.$element)}}],templateUrl:"directives/accordion/accordion.template.html"}}]),angular.module("adminPanel").directive("apAccordionItem",function(){return{require:["^^apAccordion","ngModel"],restrict:"AE",transclude:!0,scope:{itemDefaultTitle:"@?",deleteButton:"=?"},link:function(e,t,n,a){e.title="",n.$set("dataAccordionItem",""),t.addClass("accordion-item is-active"),a[0].reInitComponent(),e.deleteElement=function(){a[0].removeElement(a[1].$modelValue)},e.toggleTab=function(){a[0].toggleTab(t.find(".accordion-content"))},void 0!==e.itemDefaultTitle&&(e.title=e.itemDefaultTitle)},controller:["$scope",function(e){this.changeTitleName=function(t){e.title=t}}],templateUrl:"directives/accordion/accordionItem.template.html"}}),angular.module("adminPanel").directive("apAccordionItemTitle",["$parse",function(e){return{require:["^^apAccordionItem","ngModel"],restrict:"A",link:function(t,n,a,i){t.objectValues=e(a.apAccordionItemTitle)(t),t.$watch(function(){return i[1].$modelValue},function(e){if(e){var n="";if(e instanceof Date)n=e.toLocaleString();else if(t.objectValues instanceof Array){n="";for(var a=0;a<t.objectValues.length;a++)n+=e[t.objectValues[a]]+", ";n=n.replace(/,\s*$/,"")}else n=e;i[0].changeTitleName(n)}})}}}]),angular.module("adminPanel").directive("apBox",["$rootScope",function(e){return{restrict:"AE",priority:100,transclude:!0,scope:{title:"@",init:"&?"},compile:function(t,n){return t.addClass("ap-box"),function(t,n,a){function i(){t.elem.removeClass("no-visible"),e.$broadcast("box.directive.mouseenter",t.elem)}t.closeButton=void 0!==a.name,t.message=null,t.elem=n,t.isHide=t.closeButton,t.close=function(){t.isHide=!0},n.on("mouseenter",i);var o=t.$on("box.directive.mouseenter",function(e,n){t.elem!==n&&t.elem.addClass("no-visible")}),r=t.$on("apBox:show",function(e,n){a.name===n&&(t.isHide=!1)}),l=t.$on("$destroy",function(){n.off("mouseenter",i),o(),r(),l()});t.init&&t.init()}},templateUrl:"directives/box/box.template.html"}}]),angular.module("adminPanel").directive("apDatePicker",["$timeout",function(e){return{restrict:"AE",require:"ngModel",scope:{format:"@?"},link:function(t,n,a,i){n.addClass("row collapse date ap-datepicker"),t.date=null;t.$watch(function(){return i.$modelValue},function(e){if(e){var a=new Date(e);t.date=a,$(n.find(".ap-date")).fdatepicker("update",a)}}),$(n.find(".ap-date")).fdatepicker({format:"dd/mm/yyyy"}).on("changeDate",function(n){var a;t.date=n.date,t.date.setHours(t.date.getHours()+t.date.getTimezoneOffset()/60),a=t.date,e(function(){t.$apply(function(){i.$setViewValue(a)})})})},templateUrl:"directives/datePicker/datePicker.template.html"}}]),angular.module("adminPanel").directive("apDateTimePicker",["$timeout",function(e){return{restrict:"AE",require:"ngModel",scope:{format:"@?"},link:function(t,n,a,i){n.addClass("row collapse date ap-datetimepicker"),t.hours=null,t.minutes=null,t.date=null;function o(n,a,o){var r=angular.isUndefined(a)||null===a?null!==t.hours?t.hours:0:a,l=angular.isUndefined(o)||null===o?null!==t.minutes?t.minutes:0:o;n.setSeconds(0),n.setHours(r),n.setMinutes(l),e(function(){t.$apply(function(){i.$setViewValue(n)})})}t.$watch(function(){return i.$modelValue},function(e){if(e){var a=new Date(e);if(isNaN(a))return;t.date=a,$(n.find(".ap-date")).fdatepicker("update",a),t.hours=a.getHours(),t.minutes=a.getMinutes()}}),$(n.find(".ap-date")).fdatepicker({format:"dd/mm/yyyy"}).on("changeDate",function(e){t.date=e.date,t.date.setHours(t.date.getHours()+t.date.getTimezoneOffset()/60),o(t.date)}),t.changeHour=function(){t.hours<0&&(t.hours=0),t.hours>23&&(t.hours=23),o(t.date,t.hours,t.minutes)},t.changeMinute=function(){t.minutes<0&&(t.minutes=0),t.minutes>59&&(t.minutes=59),o(t.date,t.hours,t.minutes)}},templateUrl:"directives/dateTimePicker/dateTimePicker.template.html"}}]),angular.module("adminPanel").directive("apFilters",["$timeout",function(e){return{restrict:"E",transclude:!0,link:function(t,n,a){var i=null;e(function(){i=n.find(".accordion.filtros"),console.log("elem",i),i.foundation()}),t.$on("$destroy",function(){null!==i&&i.foundation("_destroy")})},templateUrl:"directives/filter/filter.template.html"}}]),angular.module("adminPanel").directive("fieldErrorMessages",[function(){return{restrict:"E",scope:{errors:"="},link:function(e,t){t.addClass("form-error"),console.log("fieldErrorMessages",e)},templateUrl:"directives/form/fieldErrorMessages.template.html"}}]),angular.module("adminPanel").directive("formValidation",["$parse","$compile",function(e,t){return{require:"form",restrict:"A",scope:!0,link:function(n,a,i,o){console.log("formCtrl",o);var r={required:function(e,t){return angular.isUndefined(t)&&(t=!0),function(n,a){return!t||!e.$isEmpty(a)}}},l=e(i.formValidation)(n);n.validations={};for(var s in l){var u=o[s],c=u.$$element;console.log(u);var d={};for(var m in l[s]){var g=l[s][m];u.$validators[m]=r[m](u,g.expression),d[m]=g.message}n.validations[s]={errors:u.$error,messages:d};var p=angular.element('<field-error-messages errors="validations.'+s+'.errors" messages="validations.'+s+'.messages">');t(p)(n),c.after(p)}console.log(n.validations)}}}]),angular.module("adminPanel").directive("formFieldError",["$animate","$compile","AdminPanelConfig",function(e,t,n){return{require:"^form",restrict:"A",scope:{messages:"=?",expr:"="},link:function(a,i,o,r){a.inputElem=i.find("input"),a.inputErrors=r[a.inputElem.attr("name")].$error,a.errors={};for(var l in a.messages)a.errors[l]={expresion:!1,message:a.messages[l]};a.fieldErrorMsgDirective=angular.element("<field-error-messages>"),a.fieldErrorMsgDirective.attr("errors","errors"),i.append(a.fieldErrorMsgDirective),t(a.fieldErrorMsgDirective)(a),a.$watch("inputErrors",function(e){console.log("inputErrors",e);for(var t in e)a.errors[t]||(a.errors[t]={expresion:!1,message:a.messages?a.messages[t]:n.defaultFormMessages[t]}),a.errors[t].expresion=e[t]}),a.$watch("expr",function(t){console.log("val",t),e[t?"addClass":"removeClass"](i,"is-invalid-label"),e[t?"addClass":"removeClass"](a.inputElem,"is-invalid-input"),e[t?"addClass":"removeClass"](a.fieldErrorMsgDirective,"is-visible")})}}}]),angular.module("adminPanel").directive("apImageLoader",[function(){return{require:"ngModel",restrict:"E",scope:!0,link:function(e,t,n,a){t.addClass("ap-image-loader row columns"),e.image={path:null,name:null};var i=/^image\/[a-z]*/g;function o(t){var n=t.target.files[0];if(n&&i.test(n.type)){var o=new FileReader;o.onload=function(t){e.$apply(function(){var i=t.target.result;e.image.path=i,e.image.name=n.name,a.$setViewValue(n)})},o.readAsDataURL(n)}}t.find('input[type="file"]').bind("change",o),e.loadImage=function(){};var r=e.$watch(function(){return a.$modelValue},function(e){console.log("modelValue",e)});e.$on("$destroy",function(){t.find('input[type="file"]').unbind("change",o),r()})},templateUrl:"directives/imageLoader/imageLoader.template.html"}}]),angular.module("adminPanel").directive("apAppendInfo",[function(){return{restrict:"A",scope:!0,link:function(e,t,n){console.log("apAppendInfo",t);var a=t.find('[ap-info-on-table=""]'),i=angular.element("<tr>");i.append(a),t.after(i)},controller:["$scope",function(e){e.fn=function(){}}]}}]),angular.module("adminPanel").directive("apInfoOnTable",[function(){return{restrict:"A",scope:!0,link:function(e,t,n){console.log("apInfoOnTable",t)},templateUrl:"directives/infoOnTable/infoOnTable.template.html"}}]),angular.module("adminPanel").directive("apLoad",["$animate","$compile",function(e,t){return{restrict:"A",priority:50,link:function(n,a,i){var o=i.apLoad;if(0===a.find("[ap-load='"+o+"']").length){n.name=o||"default",a.addClass("ap-load");var r=angular.element("<ap-loading-img>");a.append(r),t(r)(n),n.show=function(){e.removeClass(a,"loading")},n.hide=function(){e.addClass(a,"loading")};var l=n.$on("apLoad:start",function(e){e.stopPropagation(),n.hide()}),s=n.$on("apLoad:finish",function(e){e.stopPropagation(),n.show()}),u=n.$on("$destroy",function(){l(),s(),u()})}},controller:["$scope",function(e){this.getName=function(){return console.log("getName",e.name),e.name},this.show=function(){e.show()},this.hide=function(){e.hide()}}]}}]),angular.module("adminPanel").directive("apLoadingImg",["AdminPanelConfig",function(e){return{restrict:"AE",priority:60,link:function(t,n){n.addClass("ap-load-image"),t.path=e.imgLoadingRsc},templateUrl:"directives/load/loadingImg.template.html"}}]),angular.module("adminPanel").directive("apConfirmModal",["$timeout",function(e){return{restrict:"AE",priority:60,link:function(t,n){var a=null,i=null;e(function(){a=n.find(".reveal"),console.log("htmlElem",a),a.foundation()}),t.yes=function(){null!==i&&i(),a.foundation("close")},t.no=function(){a.foundation("close")},t.$on("ap-confirm-modal:show",function(n,o){t.title=o.title,t.text=o.text,i=angular.isFunction(o.fn)?o.fn:null,e(function(){a.foundation("open")})})},templateUrl:"directives/modals/confirm/confirmModal.template.html"}}]),angular.module("adminPanel").directive("msfCoordenadas",["$timeout",function(e){return{require:"ngModel",restrict:"E",link:function(t,n,a,i){t.coordenadas="",t.error=!1,e(function(){angular.isUndefined(i.$modelValue)&&(i.$modelValue={latitud:null,longitud:null},console.log("ngModel.$modelValue",i.$modelValue)),t.model={latitud:angular.copy(i.$modelValue.latitud),longitud:angular.copy(i.$modelValue.longitud)}}),t.$watch(function(){return i.$modelValue},function(e){e&&(t.model={latitud:angular.copy(i.$modelValue.latitud),longitud:angular.copy(i.$modelValue.longitud)})}),t.cambioCoordeandas=function(){var e=!1,n=!1;t.error=!1;for(var a=/^(([-])(\d)+((\.)(\d{2})(\d+)))$/,o=/^(([-])(\d)+((\.)(\d{2})(\d+)))$/,r=[",",":"," ","."],l=0;l<r.length;l++){var s=t.coordenadas.replace(/\s+/g,"").split(r[l]);2===s.length?(e=parseFloat(s[0].replace(",",".").match(a)),n=parseFloat(s[1].replace(",",".").match(o))):4===s.length&&(e=parseFloat((s[0]+"."+s[1]).match(a)),n=parseFloat((s[2]+"."+s[3]).match(o)))}if(!e||!n)return t.model.latitud="",t.model.longitud="",void(t.error=!0);t.model.latitud=e,t.model.longitud=n,i.$setViewValue({latitud:e,longitud:n}),t.$emit("msfCoordenadas:change",this)}},templateUrl:"directives/msfCoordenadas/msfCoordenadas.template.html"}}]),angular.module("adminPanel").directive("apPagination",["AdminPanelConfig",function(e){return{restrict:"AE",priority:50,link:function(t,n,a){t.paginationInit=!1,t.pagination=new function(e){this.currentPage=1,this.pageCount=10,this.pages=[],this.activeLastFirst=!1,this.enableNextPage=!1,this.enablePreviousPage=!1,this.enableFirstPage=!1,this.enableLastPage=!1,this.bottomPage=1,this.topPage=e;var n=function(e,t){for(var n=[],a=e;a<=t;a++)n.push(a);return n};this.rePaginate=function(){var t=Math.floor(e/2);!(1===this.bottomPage&&this.currentPage<=t||this.topPage===this.pageCount&&this.currentPage>=this.pageCount-t)&&(this.currentPage-t<1?(this.bottomPage=1,this.topPage=this.activeLastFirst?e:this.pageCount):this.currentPage+t>this.pageCount?(this.topPage=this.pageCount,this.bottomPage=this.activeLastFirst?this.pageCount-e+1:1):(this.topPage=this.currentPage+t,this.bottomPage=this.currentPage-t),this.pages=n(this.bottomPage,this.topPage))},this.changePage=function(e){this.currentPage!==e&&(t.$emit("pagination:changepage",e),this.currentPage=e,this.enableNextPage=this.currentPage<this.pageCount,this.enablePreviousPage=this.currentPage>1,this.activeLastFirst&&(this.enableFirstPage=this.currentPage>1,this.enableLastPage=this.currentPage<this.pageCount),this.rePaginate())},this.nextPage=function(){if(e!==this.pageCount){var e=this.currentPage+1;this.changePage(e)}},this.previousPage=function(){if(1!==e){var e=this.currentPage-1;this.changePage(e)}},this.init=function(t){this.pageCount=t.totalPageCount,this.currentPage=t.currentPageNumber,this.activeLastFirst=this.pageCount>e,this.enableNextPage=this.currentPage<this.pageCount,this.enableLastPage=this.activeLastFirst&&this.currentPage<this.pageCount,this.bottomPage=1,this.topPage=this.activeLastFirst?e:this.pageCount,this.pages=n(this.bottomPage,this.topPage)},this.reInit=function(e){this.pageCount=e.totalPageCount,this.currentPage=e.currentPageNumber,this.enableNextPage=this.currentPage<this.pageCount,this.enableLastPage=this.activeLastFirst&&this.currentPage<this.pageCount,this.rePaginate()}}(e.pagination),t.$on("pagination:paginate",function(e,n){t.paginationInit?t.pagination.reInit(n):(t.paginationInit=!0,t.pagination.init(n))})},templateUrl:"directives/pagination/pagination.template.html"}}]),angular.module("adminPanel").directive("apSelect",["$timeout","$rootScope","$q","$injector",function(e,t,n,a){return{restrict:"AE",require:"ngModel",scope:{resource:"@",queryParams:"=?",method:"@?",requestParam:"=?",properties:"="},link:function(i,o,r,l){o.addClass("select-ap");var s=null;if(a.has(i.resource)){var u=a.get(i.resource,"apSelect");s=u.$resource}s||console.error("El recurso no esta definido"),i.enableNewButton=!(angular.isUndefined(r.new)||null===r.new);var c=angular.isUndefined(r.name)?"default":r.name,d=angular.isString(i.properies)?i.properties.split(","):i.properties;i.itemSelected=null,i.input={model:null,vacio:!0},i.lista={items:[],desplegado:!1},i.loading=!1;var m=null,g=null,p=angular.isUndefined(i.method)||null===i.method?"get":i.method,f=angular.isString(i.queryParams)?i.queryParams.split(","):i.queryParams||d;console.log("requestParam",i.requestParam);var h=null,v=!1;function b(e){for(var t="",n=0;n<d.length;n++)t+=e[d[n]]+", ";return{name:t=t.replace(/,\s*$/,""),$$object:angular.copy(e)}}function $(e){h&&h.$cancelRequest();var t=angular.isUndefined(i.requestParam)?{}:i.requestParam;if(console.log("search",t),!e)for(var a=0;a<f.length;a++)t[f[a]]=i.input.model;h=s[p](t),i.loading=!0;var o=h.$promise.then(function(e){for(var t=e.data&&e.data.length>6?6:e.data.length,n=[],a=0;a<t;a++){var o=e.data[a];n.push(b(o))}return i.lista.items=n,i.lista.desplegado||(i.lista.desplegado=!0),e.data},function(e){n.reject(e)});o.finally(function(){h.$resolved&&(i.loading=!1)}),i.$emit("ap-select:request",c,o)}function P(){null!==m&&(console.log("cerrar lista"),i.lista.desplegado=!1,h&&h.$cancelRequest(),i.input.model=null===i.itemSelected?"":i.itemSelected.name,i.input.vacio=null===i.itemSelected)}function y(){null===m&&(console.log("abrir lista"),i.lista.desplegado=!0,0===i.lista.items.length&&$(!0))}function C(){null!==m&&(e.cancel(m),m=null,console.log("onListClick timeoutCloseListPromise canceled",m))}i.onChangeInput=function(){i.lista.desplegado||(i.lista.desplegado=!0),i.input.vacio=angular.isUndefined(i.input.model)&&0!==i.input.model.length,$()},i.onFocusInput=function(){console.log("onFocusInput"),i.lista.desplegado||(console.log("onFocusInput timeoutOpenListPromise created"),g=e(y).finally(function(){console.log("onFocusInput timeoutOpenListPromise resolved"),g=null}))},i.onBlurInput=function(){console.log("onBlurInput"),null!==g&&(e.cancel(g),g=null,console.log("onBlurInput timeoutOpenListPromise cancelled",g)),m=e(P,100).finally(function(){console.log("onBlurInput timeoutCloseListPromise resolved finally"),m=null}),console.log("onBlurInput timeoutCloseListPromise created")},i.onClickButton=function(){console.log("onClickButton"),v||(null!==m&&(e.cancel(m),m=null,console.log("onClickButton timeoutCloseListPromise canceled",m)),console.log("onClickButton give focus input"),o.find("input").focus())},i.onMousedownButton=function(e){console.log("onMousedownButton"),v=i.lista.desplegado,console.log("desplegado",v)},i.onClickItemList=function(e,t){console.log("onClickItemList"),e.stopPropagation(),i.itemSelected=t,l.$setViewValue(t.$$object),i.$emit("ap-select:item-selected",c,t.$$object)},i.newObject=function(e){e.stopPropagation(),t.$broadcast("apBox:show",r.new)},o.on("mousedown",".dropdown-ap",C),i.$watch(function(){return l.$modelValue},function(e){e&&(i.itemSelected=b(e),console.log("itemSelected",i.itemSelected),i.input.model=null===i.itemSelected?"":i.itemSelected.name,i.input.vacio=null===i.itemSelected,console.log("scope.input",i.input))});var w=i.$on("$destroy",function(){o.off("mousedown",".dropdown-ap",C),w()})},templateUrl:"directives/select/select.template.html"}}]),angular.module("adminPanel").directive("apSwitch",["$timeout",function(e){return{restrict:"AE",require:"ngModel",scope:{id:"@",title:"@"},link:function(t,n,a,i){n.addClass("row column"),t.$watch(function(){return i.$modelValue},function(e){if(e){var a=new Date(e);t.date=a,$(n.find(".ap-date")).fdatepicker("update",a)}}),t.$watch("model",function(e){i.$setViewValue(e)}),e(function(){n.foundation()})},templateUrl:"directives/switch/switch.template.html"}}]),angular.module("adminPanel").directive("apTimePicker",["$timeout",function(e){return{restrict:"AE",require:"ngModel",link:function(t,n,a,i){function o(n,a){var o=null===n?null!==t.hours?t.hours:0:n,r=null===a?null!==t.minutes?t.minutes:0:a,l=new Date;l.setSeconds(0),l.setHours(o),l.setMinutes(r),e(function(){t.$apply(function(){i.$setViewValue(l)})})}n.addClass("row collapse date ap-timepicker"),t.hours=null,t.minutes=null,t.$watch(function(){return i.$modelValue},function(e){if(e){var n=new Date(e);t.hours=n.getHours(),t.minutes=n.getMinutes()}}),t.changeHour=function(){t.hours<0&&(t.hours=0),t.hours>23&&(t.hours=23),o(t.hours,t.minutes)},t.changeMinute=function(){t.minutes<0&&(t.minutes=0),t.minutes>59&&(t.minutes=59),o(t.hours,t.minutes)}},templateUrl:"directives/timePicker/timePicker.template.html"}}]),angular.module("adminPanel").filter("highlight",["$sce",function(e){return function(t,n){return n&&(t=t.replace(new RegExp("("+n+")","gi"),'<span class="highlighted">$1</span>')),e.trustAsHtml(t)}}]),angular.module("adminPanel").provider("AdminPanelConfig",function(){var e="",t=11,n={email:"Este campo debe ser un email",max:"Se excedió el numero máximo",maxlength:"El campo tiene demasiados carácteres",min:"No se alcanza el numero minimo de carácteres",minlength:"El texto ingresado es muy corto",number:"Este campo debe ser numérico",pattern:"Este campo no cumple con el patrón especificado",required:"Este campo es requerido",url:"Este campo debe ser una url",date:"Este campo debe ser unna fecha",datetimelocal:"Este campo debe ser una fecha",time:"Ingresa una hora válida",week:"Ingresa una semana válida",month:"El mes no es válido"},a={};this.setImgLoadingIconPath=function(t){return e=t,this},this.setPagesPagination=function(e){return t=e,this},this.setDefaultFormMessenges=function(e){for(var t in e)n[t]=e[t];return this},this.setNavigationItems=function(e){a=angular.copy(e);for(var t in a){a[t].link=a[t].link?"#!"+a[t].link:"#";for(var n in a[t].items)a[t].items[n]="#!"+a[t].items[n]}return this},this.$get=[function(){return{imgLoadingRsc:e,pagination:t,defaultFormMessages:n,navigationItems:a}}]}),angular.module("adminPanel").run(["$templateCache",function(e){e.put("admin-panel.template.html","<div ap-user><div class=wrapper-header><top-bar></top-bar></div><div id=parent><navigation></navigation><div id=content><div class=transition ng-view></div></div></div><ap-confirm-modal></ap-confirm-modal></div>"),e.put("components/crud/directives/list/list.template.html",'<div ng-if="list.length !== 0"><div ng-transclude></div><ap-pagination></ap-pagination></div><div ng-if="list.length === 0" class="small-12 callout warning text-center">{{noResultText}}</div>'),e.put("components/crud/directives/list/listContainer.template.html","<ap-box title={{title}}><div ng-if=newRoute class=row><a ng-href={{newRoute}} class=button>Nuevo</a></div><div ng-transclude=form></div><div ap-load><div class=small-12 ng-transclude=list></div></div></ap-box>"),e.put("components/navigation/navigation.template.html",'<ul class="vertical menu"><li ng-repeat="(name, item) in items" ng-class="{\'is-active\': baseIndex === $index}"><a href={{item.link}} ng-bind=name></a><ul ng-if=item.items class="vertical menu nested"><li ng-repeat="(nestedItemName, nestedItemLink) in item.items" ng-class=checkRoute(nestedItemLink)><a href={{nestedItemLink}} ng-bind=nestedItemName></a></li></ul></li></ul>'),e.put("components/top-bar/top-bar.template.html","<div class=top-bar><div class=top-bar-left>Hola</div><div class=top-bar-right><ul class=menu><li><button type=button class=button ng-click=clickBtn()>Cerrar Sesión</button></li></ul></div></div>"),e.put("directives/accordion/accordion.template.html",'<div ng-if=addButtonText class="row column"><button type=button class="button secondary" ng-click=addElement() ng-bind=addButtonText></button></div><div class=accordion ng-transclude></div>'),e.put("directives/accordion/accordionItem.template.html",'<div class=accordion-top><button type=button class=accordion-title ng-click=toggleTab() ng-bind=title></button><div class=accordion-button><button type=button ng-if=deleteButton class="button alert" ng-click=deleteElement()><i class="fa fa-remove"></i></button></div></div><div class=accordion-content data-tab-content ng-transclude></div>'),e.put("directives/box/box.template.html","<div class=card ng-if=!isHide><button ng-if=closeButton class=close-button type=button ng-click=close()><span>&times;</span></button><div class=card-divider><h5 ng-bind=title></h5></div><div class=card-section><div ng-if=message class=callout ng-class=\"{'success':message.type === 'success','warning':message.type === 'warning','alert':message.type === 'error'}\" ng-bind=message.message></div><div ng-transclude ap-load></div></div></div>"),e.put("directives/datePicker/datePicker.template.html",'<div class=input-group><span class="input-group-label prefix"><i class="fa fa-calendar"></i></span><input class="input-group-field ap-date" type=text readonly></div>'),e.put("directives/dateTimePicker/dateTimePicker.template.html",'<div class=input-group><span class="input-group-label prefix"><i class="fa fa-calendar"></i></span><input class="input-group-field ap-date" type=text readonly><span class=input-group-label>Hs</span><input class=input-group-field type=number style=width:60px ng-model=hours ng-change=changeHour()><span class=input-group-label>Min</span><input class=input-group-field type=number style=width:60px ng-model=minutes ng-change=changeMinute()></div>'),e.put("directives/filter/filter.template.html",'<ul class="accordion filtros" data-accordion data-allow-all-closed=true><li class=accordion-item data-accordion-item><a href=# class=accordion-title>Filtros</a><div class=accordion-content data-tab-content ng-transclude></div></li></ul>'),e.put("directives/form/fieldErrorMessages.template.html",'<div ng-repeat="error in errors" ng-show=error.expresion ng-bind=error.message></div>'),e.put("directives/imageLoader/imageLoader.template.html",'<div class=image-view><img ng-src={{image.path}} ng-click=loadImage()></div><div class=input-group><div class=input-group-button><label for=exampleFileUpload class="button file"><i class="fa fa-file-image-o"></i></label><input type=file id=exampleFileUpload class=show-for-sr accept=image/*></div><input class=input-group-field type=text readonly ng-value=image.name></div>'),e.put("directives/infoOnTable/infoOnTable.template.html","<tr><div class=row>hola</div></tr>"),e.put("directives/load/load.template.html","<div ng-show=loading class=ap-load-image><img ng-src={{path}}></div><div ng-hide=loading class=ap-load-content><div ng-if=message class=callout ng-class=\"{'success':message.type === 'success','warning':message.type === 'warning','alert':message.type === 'error'}\" ng-bind=message.message></div><div></div></div>"),e.put("directives/load/loadingImg.template.html","<img ng-src={{path}}>"),e.put("directives/modals/confirm/confirmModal.template.html",'<div class=reveal data-reveal><h1 ng-bind=title></h1><p class=lead ng-bind=text></p><div class=button-group><a class=button ng-click=yes()>Si</a><a class=button ng-click=no()>No</a></div><button class=close-button data-close aria-label="Close modal" type=button><span aria-hidden=true>&times;</span></button></div>'),e.put("directives/msfCoordenadas/msfCoordenadas.template.html",'<div class="row column"><div class="callout secondary text-center">Podés obtener los datos de<u><a href=https://www.santafe.gov.ar/idesf/servicios/generador-de-coordenadas/tramite.php target=_blank>acá</a></u></div></div><div class="row column"><label ng-class="{\'is-invalid-label\':error}"><input style=margin-bottom:3px type=text ng-class="{\'is-invalid-input\':error}" ng-model=coordenadas ng-change=cambioCoordeandas()><span ng-class="{\'is-visible\':error}" style=margin-top:7px class=form-error>El campo ingresado contiene errores.</span></label></div><div class=row><div class="columns small-12 large-6"><label>Latitud <input type=text ng-value=model.latitud readonly></label></div><div class="columns small-12 large-6"><label>Longitud <input type=text ng-value=model.longitud readonly></label></div></div>'),e.put("directives/pagination/pagination.template.html",'<ul class="pagination text-center" role=navigation ng-if="pagination.pages.length !== 0"><li ng-if=pagination.activeLastFirst class=pagination-previous ng-class="{\'disabled\': !pagination.enablePreviousPage}"><a ng-if=pagination.enablePreviousPage ng-click=pagination.changePage(1)></a></li><li ng-class="{\'disabled\': !pagination.enablePreviousPage}"><a ng-if=pagination.enablePreviousPage ng-click=pagination.previousPage()>&lsaquo;</a><span ng-if=!pagination.enablePreviousPage>&lsaquo;</span></li><li ng-repeat="page in pagination.pages track by $index" ng-class="{\'current\':page === pagination.currentPage}"><a ng-if="page !== pagination.currentPage" ng-bind=page ng-click=pagination.changePage(page)></a><span ng-if="page === pagination.currentPage" ng-bind=page></span></li><li ng-class="{\'disabled\': !pagination.enableNextPage}"><a ng-if=pagination.enableNextPage ng-click=pagination.nextPage()>&rsaquo;</a><span ng-if=!pagination.enableNextPage>&rsaquo;</span></li><li ng-if=pagination.activeLastFirst class=pagination-next ng-class="{\'disabled\': !pagination.enableNextPage}"><a ng-if=pagination.enableNextPage ng-click=pagination.changePage(pagination.pageCount)></a></li></ul>'),e.put("directives/select/select.template.html",'<div class=input-group><input class=input-group-field type=text ng-model=input.model ng-change=onChangeInput() ng-focus=onFocusInput() ng-blur=onBlurInput()><div class=input-group-button><button type=button class="button secondary" ng-click=onClickButton() ng-mousedown=onMousedownButton($event)><span class=caret></span></button></div></div><div class=dropdown-ap ng-class="{\'is-open\':lista.desplegado}"><ul ng-if=loading class=list-group><li style=font-weight:700>Cargando...</li></ul><ul ng-if="!loading && lista.items.length > 0" class=list-group><li ng-repeat="option in lista.items" ng-bind-html="option.name | highlight:input.model" ng-mousedown="onClickItemList($event, option)" ng-class="{\'active\':option.$$object.id === itemSelected.$$object.id}"></li></ul><ul ng-if="!loading && lista.items.length === 0" class=list-group><li style=font-weight:700>No hay resultados</li></ul><ul ng-if=enableNewButton class="list-group new"><li ng-mousedown=newObject($event)><span class="fa fa-plus"></span><span>Nuevo</span></li></ul></div>'),e.put("directives/switch/switch.template.html","<label ng-bind=title></label><div class=switch><input class=switch-input id={{id}} type=checkbox ng-model=model><label class=switch-paddle for={{id}}></label></div>"),e.put("directives/timePicker/timePicker.template.html","<div class=input-group><span class=input-group-label>Hs</span><input class=input-group-field type=number ng-model=hours ng-change=changeHour()><span class=input-group-label>Min</span><input class=input-group-field type=number ng-model=minutes ng-change=changeMinute()></div>")}]);